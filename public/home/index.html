<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Course</title>
    <script type="text/javascript" src="./../jquery.js"></script>
    <link rel="stylesheet" href="/home/assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/home/assets/css/Highlight-Phone.css">
    <link rel="stylesheet" href="/home/assets/css/styles.css">
    <style>
        input[type="file"] {
            display: none;
        }

        .file3:hover, .file1:hover, .file2:hover  {
            color: gray
        }

        .file1 {
            background-color: rgb(0, 100, 255);
            color : white;

        }

        .file2 {
            background-color: rgb(0, 100, 255);
            color : white;

        }

        .file3 {
            background-color: rgb(0, 100, 255);
            color : white;

        }


    </style>
    <script>
        function show_completed(file_id) {

        }

        function change(file_id) {
            const file = document.getElementById(file_id).files[0];
            if (file) {
                $('.'+file_id).css("background-color" , "gray");
                $('#' + file_id + "_name").html(file.name);
            }
        }

        function post(file_id) {

            const file = document.getElementById(file_id).files[0];

            if (file) {
                var contents = "";
                var reader = new FileReader();
                reader.readAsText(file, "UTF-8");
                reader.onload = function (evt) {
                    contents = evt.target.result;

                    $.ajax(
                        {
                            type: "POST",
                            url: "/mission",
                            data: {
                                file: contents,
                                file_id: file_id
                            },
                            success: function (_) {

                            },
                            error: function (_, __, msg) {
                                $('#result').replaceWith(`<p class="text-center" id="result">${msg}</p>`)
                            }
                        }
                    )
                }
                reader.onerror = function (evt) {
                    // Nada
                }




            }
        }
    </script>
</head>

<body style="height: 650px;">
    <section class="highlight-phone" style="background: rgba(238,244,247,0);">
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <div class="intro">
                        <h2>Mission 1</h2>
                        <p>Write a program that prints <code>Hello World</code>&nbsp;to the console</p>



                        <p id="file1_name" style="margin-bottom: 0"></p>
                        <label class="btn btn-secondary file1" style="color: white; background-color: rgb(0, 100, 255);" >
                            <input id="file1" type="file" style="color: rgb(0,0,0);" onchange="change('file1')"/>
                            Upload File
                        </label>
                        <button class="btn btn-primary" type="button" onclick="post('file1')">Submit</button>
                    </div>
                </div>
                <p></p><hr><p></p>
                <div class="col-md-8">
                    <div class="intro">
                        <h2>Mission 2</h2>
                        <p>Write a program that prints <code>Hello World</code>&nbsp;to the console</p>

                        <p id="file2_name" style="margin-bottom: 0"></p>
                        <label class="btn btn-secondary file2" style="color: white; background-color: rgb(0, 100, 255);" >
                            <input id="file2" type="file" style="color: rgb(0,0,0);" onchange="change('file2')"/>
                            Upload File
                        </label>
                        <button class="btn btn-primary" type="button" onclick="post('file2')">Submit</button>
                    </div>
                </div>
                <p></p><hr><p></p>
                <div class="col-md-8">
                    <div class="intro">
                        <h2>Mission 3</h2>
                        <p>Write a program that prints <code>Hello World</code>&nbsp;to the console</p>

                        <p id="file3_name" style="margin-bottom: 0"></p>
                        <label class="btn btn-secondary file3" style="color: white; background-color: rgb(0, 100, 255);" >
                            <input id="file3" type="file" style="color: rgb(0,0,0);" onchange="change('file3')"/>
                            Upload File
                        </label>
                        <button class="btn btn-primary" type="button" onclick="post('file3')">Submit</button>
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="d-none d-md-block phone-mockup"></div>
                </div>
            </div>
        </div>
    </section>
    <script src="/home/assets/bootstrap/js/bootstrap.min.js"></script>
</body>

</html>